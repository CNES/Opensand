<?xml version="1.0" encoding="UTF-8"?>
<configuration component='st'>
    <!-- The global configuration for the gateway -->
    <global>
        <!-- The uplink/return link encapsulation scheme (ATM_AAL5, MPEG_ULE, GSE)-->
        <!-- TODO find a correct name and put in global -->
        <output_encap_scheme>ATM_AAL5</output_encap_scheme>
        <!-- The downlink/forward link encapsulation scheme (ATM_AAL5, MPEG_ULE, GSE)-->
        <!-- TODO find a correct name and put in global -->
        <input_encap_scheme>GSE</input_encap_scheme>
    </global>
    <!-- The service classes for QoS relation between IP and MAC layers -->
    <service_class>
        <!-- The type of scheduler (HTB, HDLB) -->
        <scheduler_type>HTB</scheduler_type>
        <!-- The QoS tree mode
              (DEFAULT: one branch per class,
               DYN_EF_BRANCHES: one branch per class and per EF traffic flow,
               USERS: one branch per class, per EF traffic flow and per user) -->
        <qos_tree_mode>DEFAULT</qos_tree_mode>
        <!-- The class for signalisation mapping (NO, NM, SIG) -->
        <mapping_sig>SIG</mapping_sig>
        <!-- The port used for signalisation -->
        <sig_port>5060</sig_port>
        <classes>
            <!-- The id must be positive -->
            <!-- TODO: mac_queue_id = scheduler_priority - 1 = id - 1-->
            <class id="0" name="NM"  scheduler_priority="1" mac_queue_id="0" />
            <class id="1" name="EF"  scheduler_priority="2" mac_queue_id="1" />
            <class id="2" name="SIG" scheduler_priority="3" mac_queue_id="2" />
            <class id="3" name="AF"  scheduler_priority="4" mac_queue_id="3" />
            <class id="4" name="BE"  scheduler_priority="5" mac_queue_id="4" />
        </classes>
    </service_class>
    <!-- The traffic categories for QoS at IP layer -->
    <traffic_category>
        <!-- The default traffic category -->
        <default_category>7</default_category>
        <categories>
            <!-- The id must be positive -->
            <!-- Class is the service class number related to category -->
            <!-- rates in bits/s -->
            <!-- burst: burst for HTB, bucket size for HDLB scheduler -->
            <!-- TODO: id = class + 1 -->
            <!-- TODO: group traffic category and classes ?-->
            <category id="1" name="NM"   class="0" />
            <category id="2" name="EF"   class="1" />
            <category id="3" name="SIG"  class="2" />
            <category id="4" name="AF_1" class="3" />
            <category id="5" name="AF_2" class="3" />
            <category id="6" name="AF_3" class="3" />
            <category id="7" name="BE"   class="4" />
        </categories>
    </traffic_category>
    <!-- The dvb layer configuration -->
    <dvb_rcs_tal>
    <!-- The following parameters must be common for all STs -->
        <!-- The OBR period (frame number): period used to determine when we
             should send a request -->
        <obr_period>10</obr_period>
        <!-- The Sending carrier id for DVB control frames, logon and
             ATM cells, MPEG or GSE packets -->
        <carrier_id_dvb_ctrl>2</carrier_id_dvb_ctrl>
        <carrier_id_logon>4</carrier_id_logon>
        <carrier_id_data>6</carrier_id_data>
        <!-- The RBDC Timeout (frame number) -->
        <rbdc_timeout>12</rbdc_timeout>
        <!-- The Minimum Scheduling Latency (frame number): time between the
             capacity request emission and the reception of the corresponding
             Terminal Burst Time Plan -->
        <msl_duration>2</msl_duration>
        <!-- RBDC and VBDC Capacity requests computation rules
             ("no" = both INPUT + OUTPUT DLB fifos size are taken into account,
              "yes"  = only OUTPUT DLB fifos size are taken into account) -->
        <cr_rule_output_fifo_only>no</cr_rule_output_fifo_only>
    <!-- The following parameters depends on STs -->
        <!-- The Dvb Mac identifier = the terminal id (integer) -->
        <dvb_mac_id>1</dvb_mac_id>
        <!-- The static bandwidth allocated to ST (kbits/s) = the bandwodth for
             real time traffic -->
        <rt_fixed_bandwidth>100</rt_fixed_bandwidth>
        <!-- The MAC fifos in DECREASING PRIORITY ORDER (TODO remove this need) -->
        <!-- TODO compute the FIFO memory pool from here:
             it  is limited to 100000, be careful that the maxSize sum is under 100000
             this can be modified in "satip6/dvb_rcs/utils/MacFifoElement.cpp -->
        <fifos>
            <!-- size_max: The maximum number of cells or packets in DVB FIFO -->
            <!-- PVC ids begin to 1, they must be in increasing order -->
            <!-- cr_type: The type of capacity request (RBDC, VBDC, NONE) -->
            <fifo id="0" type="NM" size_max="10000" pvc="1" cr_type="RBDC" />
            <fifo id="1" type="EF" size_max="30000" pvc="1" cr_type="RBDC" />
            <fifo id="2" type="SIG" size_max="10000" pvc="1" cr_type="RBDC" />
            <fifo id="3" type="AF" size_max="20000" pvc="1" cr_type="RBDC" />
            <fifo id="4" type="BE" size_max="30000" pvc="2" cr_type="RBDC" />
        </fifos>
        <!-- The maximum RBDC value for the terminal (kbits/s) -->
        <max_rbdc>1024</max_rbdc>
        <!-- The maximum VBDC value for the terminal (cells or packets number) -->
        <max_vbdc>10</max_vbdc>
    </dvb_rcs_tal>
    <!-- The satellite carriers description -->
    <sat_carrier>
        <carriers>
            <!-- depending on the case the IP address contains:
                  input unicast:   the parameter is not used
                  input multicast: the multicast IP address
                  output:          the remote IP address -->
            <carrier id="1" ip_address="239.137.194.221" port="55001" in="y" out="n" ip_multicast="y" />
            <carrier id="2" ip_address="192.168.18.15"   port="55002" in="n" out="y" ip_multicast="n" />
            <carrier id="4" ip_address="192.168.18.15"   port="55004" in="n" out="y" ip_multicast="n" />
            <carrier id="5" ip_address="239.137.194.222" port="55005" in="y" out="n" ip_multicast="y" />
            <carrier id="6" ip_address="192.168.18.15"   port="55006" in="n" out="y" ip_multicast="n" />
        </carriers>
        <!-- The type of the socket (SOCK_DGRAM: UDP) -->
        <socket_type>SOCK_DGRAM</socket_type>
        <!-- The local IP address for emulation network -->
        <addr>192.168.18.1</addr>
    </sat_carrier>
    <!-- The QoS data parameters -->
    <qos_agent>
        <!-- The ST address -->
        <st_address>192.168.19.5</st_address>
        <!-- The ST name -->
        <st_name>ST1</st_name>
        <!-- The QoS server port -->
        <qos_server_port>12000</qos_server_port>
    </qos_agent>
    <!-- The debug parameters -->
    <debug>
        <default>1</default>
        <qos_data>1</qos_data>
        <dama_da>1</dama_da>
        <dvb_rcs>1</dvb_rcs>
        <dvb_rcs_tal>1</dvb_rcs_tal>
        <qos_control>1</qos_control>
        <sat_carrier>1</sat_carrier>
        <encap>1</encap>
    </debug>
</configuration>

