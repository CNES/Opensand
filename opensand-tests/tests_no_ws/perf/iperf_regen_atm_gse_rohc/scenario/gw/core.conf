<?xml version='1.0' encoding='UTF-8'?>
<configuration component="gw">
    <!-- The dvb layer configuration -->
    <dvb_rcs_ncc>
        <!-- The Free capacity assignement (kbits/s) -->
        <fca>0</fca>
        <!-- The RBDC Timeout (superframe number) -->
        <rbdc_timeout>12</rbdc_timeout>
        <!-- The maximum RBDC value (kbits/s) -->
        <max_rbdc>1024</max_rbdc>
        <!-- The minimum VBDC value (cells or packets number) -->
        <min_vbdc>3</min_vbdc>
        <!-- CRA decrease (yes, no): indicates if rt_fixed_bandwidth has to be
             removed from the RBDC value  of the capacity requests -->
        <cra_decrease>false</cra_decrease>
        <!-- Is there imulated requests ? (none, random, file) -->
        <simulation>none</simulation>
        <!-- If simulation = file: use a file name or stdin -->
        <simu_file>/etc/opensand/simulation/dama.input</simu_file>
        <!-- If simulation = random:
             nb_station (numbered > 100):RT bandwidth (Kb/s):mean_requests (Kb/s):amplitude_request(Kb/s) -->
        <simu_random>10:100:200:100</simu_random>
        <!-- Do we generate a stat history ? (same format as simu_file, can be used for
             replaying a case study) (none, stdout, stderr, {file path}) -->
        <stat_file>none</stat_file>
<!--        <stat_file>/dev/shm/stat.txt</stat_file> -->
        <!-- Do we generate an event history ? (same format as simu_file, can be used for
             replaying a case study) (none, stdout, stderr, {file path}) -->
        <event_file>none</event_file>
<!--        <event_file>/dev/shm/event.txt</event_file> -->
        <!-- The Sending carrier id for DVB control frames and
             ATM cells, MPEG or GSE packets -->
        <carrier_id_dvb_ctrl>2</carrier_id_dvb_ctrl>
        <carrier_id_data>6</carrier_id_data>
        <carrier_id_sof>2</carrier_id_sof>
        <!-- The maximal size of the BBFrame FIFO -->
        <max_fifo>5000</max_fifo>
    </dvb_rcs_ncc>
    <!-- The PEP (Policy Enforcement Point) parameters -->
    <pep>
        <!-- communication port on DAMA for PEP messages -->
        <pep_to_dama_port>5333</pep_to_dama_port>
        <!-- Delay to apply anticipation RBDC allocations from PEP/ARC (ms) -->
        <pep_alloc_delay>1000</pep_alloc_delay>
    </pep>
    <!-- The service classes for QoS relation between IP and MAC layers -->
    <service_class>
        <classes>
            <!-- The id must be positive -->
            <!-- TODO: mac_queue_id = scheduler_priority - 1 = id - 1-->
            <class id="0" name="NM"  scheduler_priority="1" mac_queue_id="0" />
            <class id="1" name="EF"  scheduler_priority="2" mac_queue_id="1" />
            <class id="2" name="SIG" scheduler_priority="3" mac_queue_id="2" />
            <class id="3" name="AF"  scheduler_priority="4" mac_queue_id="3" />
            <class id="4" name="BE"  scheduler_priority="5" mac_queue_id="4" />
        </classes>
    </service_class>
    <!-- The traffic categories for QoS at IP layer -->
    <traffic_category>
        <!-- The default traffic category -->
        <default_category>0</default_category>
        <categories>
            <!-- The id must be positive -->
            <!-- Class is the service class number related to category -->
            <!-- TODO: id = class + 1 -->
            <!-- TODO: group traffic category and classes ?-->
            <category id="248" name="NM"   class="0" />
            <category id="184" name="EF"   class="1" />
            <category id="216" name="SIG"  class="2" />
            <category id="40" name="AF_1" class="3" />
            <category id="72" name="AF_2" class="3" />
            <category id="104" name="AF_3" class="3" />
            <category id="0" name="BE"   class="4" />
        </categories>
    </traffic_category>
    <!-- TODO only used for compatibility purpose
         -> need to be updated with a real MAC emulation of the GW -->
    <dvb_rcs_tal>
        <!-- The MAC fifos in DECREASING PRIORITY ORDER (TODO remove this need) -->
        <!-- TODO compute the FIFO memory pool from here:
             it  is limited to 100000, be careful that the maxSize sum is under 100000
             this can be modified in "satip6/dvb_rcs/utils/MacFifoElement.cpp -->
        <fifos>
            <!-- size_max: The maximum number of cells or packets in DVB FIFO -->
            <!-- PVC ids begin to 1, they must be in increasing order -->
            <!-- cr_type: The type of capacity request (RBDC, VBDC, NONE) -->
            <fifo id="0" type="NM"  size_max="10000" pvc="1" cr_type="RBDC" />
            <fifo id="1" type="EF"  size_max="30000" pvc="1" cr_type="RBDC" />
            <fifo id="2" type="SIG" size_max="10000" pvc="1" cr_type="RBDC" />
            <fifo id="3" type="AF"  size_max="20000" pvc="1" cr_type="RBDC" />
            <fifo id="4" type="BE"  size_max="30000" pvc="2" cr_type="RBDC" />
        </fifos>
    </dvb_rcs_tal>
    <physical_layer>
        <models>
            <model link="up"   attenuation_model_type="file" nominal_condition_type="default"
                   minimal_condition_type="modcod" error_insertion_type="gate" />
            <model link="down" attenuation_model_type="file" nominal_condition_type="default"
                   minimal_condition_type="modcod"   error_insertion_type="gate" />
        </models>
    </physical_layer>
    <!-- The debug parameters -->
    <debug>
        <default>1</default>
        <qos_data>1</qos_data>
        <dama_da>1</dama_da>
        <dvb_rcs>1</dvb_rcs>
        <dvb_rcs_ncc>1</dvb_rcs_ncc>
        <physical_layer>1</physical_layer>
        <sat_carrier>1</sat_carrier>
        <encap>1</encap>
    </debug>
</configuration>
